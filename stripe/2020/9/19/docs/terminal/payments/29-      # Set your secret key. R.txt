      # Set your secret key. Remember to switch to your live secret key in production!
# See your keys here: https://dashboard.stripe.com/account/apikeys


 // Action for a "Checkout" button
- (void)checkoutAction {
    SCPPaymentIntentParameters *params = [[SCPPaymentIntentParameters alloc] initWithAmount:1000
                                                                                   currency:@"usd"];
    [[SCPTerminal shared] createPaymentIntent:params completion:^(SCPPaymentIntent *createResult, NSError *createError) {
        if (createError) {
            NSLog(@"createPaymentIntent failed: %@", createError);
        }
        else {
            NSLog(@"createPaymentIntent succeeded");
            self.collectCancelable = [[SCPTerminal shared] collectPaymentMethod:createResult delegate:self completion:^(SCPPaymentIntent *collectResult, NSError *collectError) {
                if (collectError) {
                    NSLog(@"collectPaymentMethod failed: %@", collectError);
                }
                else {
                    NSLog(@"collectPaymentMethod succeeded");
                    [[SCPTerminal shared] processPayment:createResult completion:^(SCPPaymentIntent *processResult, SCPProcessPaymentError *processError) {
                        if (processError) {
                            NSLog(@"processPayment failed: %@", processError);
                        }
                        else {
                            NSLog(@"processPayment succeeded");
                            // Notify your backend to capture the PaymentIntent
                            [[APPAPIClient shared] capturePaymentIntent:processResult.stripeId completion:^(NSError *captureError) {
                                if (captureError) {
                                    NSLog(@"capture failed: %@", captureError);
                                }
                                else {
                                    NSLog(@"capture succeeded");
                                }
                            }];
                        }
                    }];
                }
            }];
        }
    }];
}
      # Set your secret key. Remember to switch to your live secret key in production!
# See your keys here: https://dashboard.stripe.com/account/apikeys


 // Action for a "Checkout" button
- (void)checkoutAction {
    SCPPaymentIntentParameters *params = [[SCPPaymentIntentParameters alloc] initWithAmount:1000
                                                                                   currency:@"usd"];
    [[SCPTerminal shared] createPaymentIntent:params completion:^(SCPPaymentIntent *createResult, NSError *createError) {
        if (createError) {
            NSLog(@"createPaymentIntent failed: %@", createError);
        }
        else {
            NSLog(@"createPaymentIntent succeeded");
            self.collectCancelable = [[SCPTerminal shared] collectPaymentMethod:createResult delegate:self completion:^(SCPPaymentIntent *collectResult, NSError *collectError) {
                if (collectError) {
                    NSLog(@"collectPaymentMethod failed: %@", collectError);
                }
                else {
                    NSLog(@"collectPaymentMethod succeeded");
                    [[SCPTerminal shared] processPayment:createResult completion:^(SCPPaymentIntent *processResult, SCPProcessPaymentError *processError) {
                        if (processError) {
                            NSLog(@"processPayment failed: %@", processError);
                        }
                        else {
                            NSLog(@"processPayment succeeded");
                            // Notify your backend to capture the PaymentIntent
                            [[APPAPIClient shared] capturePaymentIntent:processResult.stripeId completion:^(NSError *captureError) {
                                if (captureError) {
                                    NSLog(@"capture failed: %@", captureError);
                                }
                                else {
                                    NSLog(@"capture succeeded");
                                }
                            }];
                        }
                    }];
                }
            }];
        }
    }];
}
