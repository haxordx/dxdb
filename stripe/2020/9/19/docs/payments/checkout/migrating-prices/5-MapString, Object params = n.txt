Map<String, Object> params = new HashMap<String, Object>();

params.put("billing_address_collection", "auto");

Map<String, Object> shipping = new HashMap<String, Object>();
String[] allowedCountries = {"US", "CA"};
shipping.put("allowed_countries", allowedCountries);
params.put("shipping_address_collection", shipping);

ArrayList<String> paymentMethodTypes = new ArrayList<>();
paymentMethodTypes.add("card");
params.put("payment_method_types", paymentMethodTypes);

ArrayList<HashMap<String, Object>> lineItems = new ArrayList<>();
HashMap<String, Object> lineItem = new HashMap<String, Object>();

lineItem.put("name", "T-shirt")
lineItem.put("description", "Comfortable cotton t-shirt")
lineItem.put("amount", 2000)
lineItem.put("currency", "usd")

Map<String, Object> productData = new HashMap<>();
productData.put("name", "T-Shirt");
productData.put("description", "Comfortable cotton t-shirt")

Map<String, Object> priceData = new HashMap<>();
priceData.put("currency", "usd");
priceData.put("product_data", productData);
priceData.put("unit_amount", 2000);
lineItem.put("price_data", priceData);
lineItem.put("quantity", 1);
lineItems.add(lineItem);
params.put("line_items", lineItems);

params.put("mode", "payment");

params.put("success_url", "https://example.com/success");
params.put("cancel_url", "https://example.com/cancel");

Session session = Session.create(params);
EOFMap<String, Object> params = new HashMap<String, Object>();

params.put("billing_address_collection", "auto");

Map<String, Object> shipping = new HashMap<String, Object>();
String[] allowedCountries = {"US", "CA"};
shipping.put("allowed_countries", allowedCountries);
params.put("shipping_address_collection", shipping);

ArrayList<String> paymentMethodTypes = new ArrayList<>();
paymentMethodTypes.add("card");
params.put("payment_method_types", paymentMethodTypes);

ArrayList<HashMap<String, Object>> lineItems = new ArrayList<>();
HashMap<String, Object> lineItem = new HashMap<String, Object>();

lineItem.put("name", "T-shirt")
lineItem.put("description", "Comfortable cotton t-shirt")
lineItem.put("amount", 2000)
lineItem.put("currency", "usd")

Map<String, Object> productData = new HashMap<>();
productData.put("name", "T-Shirt");
productData.put("description", "Comfortable cotton t-shirt")

Map<String, Object> priceData = new HashMap<>();
priceData.put("currency", "usd");
priceData.put("product_data", productData);
priceData.put("unit_amount", 2000);
lineItem.put("price_data", priceData);
lineItem.put("quantity", 1);
lineItems.add(lineItem);
params.put("line_items", lineItems);

params.put("mode", "payment");

params.put("success_url", "https://example.com/success");
params.put("cancel_url", "https://example.com/cancel");

Session session = Session.create(params);
EOF