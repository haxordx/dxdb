// Set your secret key. Remember to switch to your live secret key in production!
// See your keys here: https://dashboard.stripe.com/account/apikeys
StripeConfiguration.ApiKey = "sk_test_4eC39HqLyjWDarjtT1zdp7dc";

// Create a PaymentIntent:
var paymentIntentOptions = new PaymentIntentCreateOptions
{
  Amount = 10000,
  Currency = "usd",
  PaymentMethodTypes = new List<string>
  {
    "card",
  },
  TransferGroup = "{ORDER10}",
};
var paymentIntentService = new PaymentIntentService();
var paymentIntent = paymentIntentService.Create(paymentIntentOptions);

// Create a Transfer to the connected account (later):
var transferOptions = new TransferCreateOptions
{
  Amount = 7000,
  Currency = "usd",
  Destination = "{{CONNECTED_STRIPE_ACCOUNT_ID}}",
  TransferGroup = "{ORDER10}",
};

var transferService = new TransferService();
var transfer = transferService.Create(transferOptions);

// Create a second Transfer to another connected account (later):
var secondTransferOptions = new TransferCreateOptions
{
  Amount = 2000,
  Currency = "usd",
  Destination = "{{OTHER_CONNECTED_STRIPE_ACCOUNT_ID}}",
  TransferGroup = "{ORDER10}",
};
var secondTransfer = transferService.Create(secondTransferOptions);
// Set your secret key. Remember to switch to your live secret key in production!
// See your keys here: https://dashboard.stripe.com/account/apikeys
StripeConfiguration.ApiKey = "sk_test_4eC39HqLyjWDarjtT1zdp7dc";

// Create a PaymentIntent:
var paymentIntentOptions = new PaymentIntentCreateOptions
{
  Amount = 10000,
  Currency = "usd",
  PaymentMethodTypes = new List<string>
  {
    "card",
  },
  TransferGroup = "{ORDER10}",
};
var paymentIntentService = new PaymentIntentService();
var paymentIntent = paymentIntentService.Create(paymentIntentOptions);

// Create a Transfer to the connected account (later):
var transferOptions = new TransferCreateOptions
{
  Amount = 7000,
  Currency = "usd",
  Destination = "{{CONNECTED_STRIPE_ACCOUNT_ID}}",
  TransferGroup = "{ORDER10}",
};

var transferService = new TransferService();
var transfer = transferService.Create(transferOptions);

// Create a second Transfer to another connected account (later):
var secondTransferOptions = new TransferCreateOptions
{
  Amount = 2000,
  Currency = "usd",
  Destination = "{{OTHER_CONNECTED_STRIPE_ACCOUNT_ID}}",
  TransferGroup = "{ORDER10}",
};
var secondTransfer = transferService.Create(secondTransferOptions);
