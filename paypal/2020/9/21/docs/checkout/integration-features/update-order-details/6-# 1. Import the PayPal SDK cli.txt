# 1. Import the PayPal SDK client that was created in `Set up the Server SDK`.
require_relative '../paypal_client'

include PayPalCheckoutSdk::Orders

module Samples
  class PatchOrder

    #2. Set up your server to receive a call from the client
    # Use this function to patch an order.
    # PATCH is supported for a specific set of fields.
    # Refer to the Orders API reference for more information.
    def patch_order(order_id)
      body = [{
        op:'replace',
        path:"/purchase_units/@reference_id=='PUHF'/description",
        value:'Sporting goods description'
      },
      {
        op: 'replace',
        path: "/purchase_units/@reference_id=='PUHF'/custom_id",
        value: 'CUST-ID-HighFashions'
        }
      ]
      request = OrdersPatchRequest::new(order_id)
      request.request_body(body)
      #3. Call PayPal to patch the transaction
      response = PayPalClient::client::execute(request)
      return response
    end
  end
end

# Driver function that calls the PATCH order
if __FILE__ == $0
  begin
    patch_response = Samples::PatchOrder::new::patch_order('REPLACE-WITH-VALID-ORDER-ID')
  end
end
copy