// Get payment id from query string following redirect
Payment payment = new Payment();
payment.setId("PAY-28103131SP722473WKFD7VGQ");

// Execute payment using payer_id obtained from query string following redirect
PaymentExecution paymentExecution = new PaymentExecution();
paymentExecution.setPayerId("DUFRQ8GWYMJXC");
try {
  Payment createdPayment = payment.execute(apiContext, paymentExecution);

  if ("approved".equals(createdPayment.getState())){
    // Get order id
    String orderId = createdPayment.getTransactions().get(0)
      .getRelatedResources().get(0).getOrder().getId();
  }
} catch (PayPalRESTException e) {
  System.err.println(e.getDetails());
}copy